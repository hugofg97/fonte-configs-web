(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{184:function(e,t,r){},185:function(e,t,r){},319:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(22),o=r.n(c),s=r(58),i=(r(184),r.p,r(185),r(13)),u=r(9),d=r(8),l=r.n(d),b=r(19),p=r(12),j=r(14),v=r(384),m=r(386),f=r(327),h=r(379),x=r(388),O=r(38),g=r(95),y=r(52),C=y.a().shape({number:y.b().required("Obrigat\xf3rio").min(9,"M\xednimo de 9 caracteres"),holderName:y.b().required("Obrigat\xf3rio").min(6,"M\xednimo de 6 caracteres"),holderDocument:y.b().required("Obrigat\xf3rio").min(11,"M\xednimo de 11 caracteres"),expMonth:y.b("Data inv\xe1lida").required("Obrigat\xf3rio").min(1,"M\xednimo de 2 caracteres").max(2,"M\xe1ximo 2 caracteres"),expYear:y.b("Data inv\xe1lida").required("Obrigat\xf3rio").min(2,"M\xednimo de 2 caracteres").max(2,"M\xe1ximo 2 caracteres"),cvv:y.b().required("Obrigat\xf3rio").min(3,"M\xednimo de 3 caracteres")}),w=r(324),S=r(372),k=Object(S.a)((function(e){return{root:{backgroundColor:""},inputs:{margin:"10px"},button:{color:"green",margin:"10px",backgroundColor:"white",border:"green 1px solid"}}})),N=r(112),M=r.n(N),D=r(63),_=(r(90),function(){var e=Object(b.a)(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.post("/subscriber/address/".concat(r),{idPg:"cus_l7vdj7KcJQHNjpQE",number:null===t||void 0===t?void 0:t.number,street:null===t||void 0===t?void 0:t.street,neighborhood:null===t||void 0===t?void 0:t.neighborhood,complement:"8\xba andar",zipCode:null===t||void 0===t?void 0:t.zip_code,city:null===t||void 0===t?void 0:t.city,state:null===t||void 0===t?void 0:t.state,country:"BR"});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),T=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/subscriber/find/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.address,r=t.card,n=t.document,a=t.idPg,e.next=3,D.a.post("/subscriber/card/".concat(n),Object(j.a)(Object(j.a)({},r),{},{label:"renner",idPg:a,address:{city:"Fonte",state:"RK",number:"01",neighborhood:"Paz",street:"Caminho da felicidade",country:"BR",zip_code:"04103030"},options:{verify_card:!0}}));case 3:return c=e.sent,o=c.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.password,n=t.document,e.prev=1,e.next=4,D.a.post("/subscriber/signature/".concat(n),{password:r});case 4:return a=e.sent,c=a.data,console.log("__________",c.data),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),A=r(2),B={address:{city:"",state:"",number:"",neighborhood:"",street:"",country:"BR",zip_code:""},setAddress:function(){},userId:"",setUserId:function(){},cardId:"",setCardId:function(){},card:"",setCard:function(){},updateUserData:function(){},getUser:function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveCard:function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveAddress:function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setUser:function(){},setMsgError:function(){},setSuccessSaveAddress:function(){},successSaveAddress:!1,successSaveCard:!1,setSuccessSaveCard:function(){},msgError:"",user:{}},E=Object(n.createContext)(B),z=function(e){var t=e.children,r=Object(n.useState)({city:"",state:"",number:"",neighborhood:"",street:"",country:"BR",zip_code:""}),a=Object(u.a)(r,2),c=a[0],o=a[1],s=Object(n.useState)({number:"",holderName:"",holderDocument:"",expMonth:"",expYear:"",cvv:"",brand:""}),i=Object(u.a)(s,2),d=i[0],p=i[1],j=Object(n.useState)(""),v=Object(u.a)(j,2),m=v[0],f=v[1],h=Object(n.useState)(!1),x=Object(u.a)(h,2),O=x[0],g=x[1],y=Object(n.useState)(!1),C=Object(u.a)(y,2),w=C[0],S=C[1],k=Object(n.useState)(""),N=Object(u.a)(k,2),M=N[0],D=N[1],P=Object(n.useState)(""),B=Object(u.a)(P,2),z=B[0],F=B[1],U=Object(n.useState)({}),q=Object(u.a)(U,2),R=q[0],Y=q[1],L=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n,a,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T(t);case 3:r=e.sent,n=r.data,a=n.idPg,c=n.address,o=n.cards,c&&F(a),o&&D(o),Y(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),f(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.address,n=t.id,e.prev=1,g(!1),e.next=5,_(r,n);case 5:g(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S(!1),e.next=4,I(t);case 4:S(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)(E.Provider,{value:{address:c,card:d,cardId:M,userId:z,user:R,msgError:m,successSaveCard:w,successSaveAddress:O,saveAddress:J,setSuccessSaveAddress:g,setSuccessSaveCard:S,saveCard:Q,setMsgError:f,setUser:Y,setAddress:o,getUser:L,setCard:p,setCardId:D,setUserId:F},children:t})},F=E,U=r(113),q=r.n(U),R=r(387),Y=r(385),L=r(396),J=r(394),Q=r(395),H=r(378),V=r(389),W=n.forwardRef((function(e,t){return Object(A.jsx)(V.a,Object(j.a)({direction:"up",ref:t},e))}));function K(e){var t=e.title,r=e.message,a=e.confirm,c=e.deny,o=e.open,s=e.setOpen;return n.useEffect((function(){console.log(o)}),[o]),Object(A.jsx)("div",{children:Object(A.jsxs)(Y.a,{fullWidth:!0,open:o,TransitionComponent:W,keepMounted:!0,onClose:s,"aria-describedby":"alert-dialog-slide-description",children:[Object(A.jsx)(H.a,{children:t}),Object(A.jsx)(J.a,{children:Object(A.jsx)(Q.a,{id:"alert-dialog-slide-description",children:r})}),Object(A.jsxs)(L.a,{children:[c&&Object(A.jsx)(R.a,{onClick:null===c||void 0===c?void 0:c.action,children:null===c||void 0===c?void 0:c.label}),a&&Object(A.jsx)(R.a,{onClick:null===a||void 0===a?void 0:a.action,children:null===a||void 0===a?void 0:a.label})]})]})})}var X=Object(w.a)((function(e){return{root:{"& .MuiFormHelperText-root":{color:"red"},"& .MuiInputBase-adornedEnd":{backgroundColor:"white",border:"0.5px solid grey",borderRadius:"5px"},marginBottom:"15px"}}}))(v.a);function Z(e){var t,r,a,c,o,s,d,v,y,w,S,N,D=Object(i.e)().id,_=Object(n.useContext)(F),T=_.address,I=_.card,P=_.setCard,B=_.user,E=_.msgError,z=_.successSaveCard,U=_.setMsgError,R=_.saveCard,Y=k(e),L=Object(n.useState)(""),J=Object(u.a)(L,2),Q=J[0],H=J[1],V=Object(n.useState)(!1),W=Object(u.a)(V,2),Z=W[0],G=W[1],$=function(e){return function(t){if("number"!==e)if("expMonth"!==e)P(Object(j.a)(Object(j.a)({},I),{},Object(p.a)({},e,t.target.value)));else{var r=t.target.value;0===r.length&&P(Object(j.a)(Object(j.a)({},I),{},Object(p.a)({},e,"")));var n=parseInt(r);if(isNaN(n))return;P(Object(j.a)(Object(j.a)({},I),{},Object(p.a)({},e,n.toString())))}else{var a=t.target.value;0===a.length&&P(Object(j.a)(Object(j.a)({},I),{},Object(p.a)({},e,"")));var c,o=parseInt(a);if(isNaN(o))return;P(Object(j.a)(Object(j.a)({},I),{},Object(p.a)({},e,a.toString()))),a.length>4&&((null===(c=q()(a)[0])||void 0===c?void 0:c.type)?H(q()(a)[0].type):H(""))}}},ee=Object(O.d)({mode:"onBlur",resolver:Object(g.a)(C)}),te=ee.register,re=ee.handleSubmit,ne=ee.formState.errors,ae=e.submit,ce=e.existsCard,oe=function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=4;break}return console.log(Q),console.log("Cartt\xe3o inv\xe1lido"),e.abrupt("return");case 4:return e.next=6,R({card:Object(j.a)(Object(j.a)({},I),{},{brand:Q,holderDocument:I.holderDocument.replace(/[^0-9]/g,"")}),address:Object(j.a)(Object(j.a)({},T),{},{zip_code:T.zip_code.replace(/[^0-9]/g,"")}),document:D,idPg:null===B||void 0===B?void 0:B.idPg});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){G(!!E),z&&ae()}),[E,z]),Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",marginTop:5,padding:"10px",children:[Object(A.jsx)(f.a,{children:"Ficamos felizes por querer caminhar nesta jornada espiritual e mental conosco. Para continuar basta informar seus dados de pagamento"}),ce?"J\xe1 existe um cart\xe3o associado a sua conta":Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",children:[Object(A.jsx)(X,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.number,error:!!(null===(t=ne.number)||void 0===t?void 0:t.message),className:Y.inputs,helperText:null===(r=ne.number)||void 0===r?void 0:r.message},te("number",$("number"))),{},{onChange:$("number"),type:"text",id:"filled-error-helper-text",label:"N\xfamero do cart\xe3o",variant:"filled",inputProps:{maxLength:16},InputProps:{endAdornment:Object(A.jsx)(h.a,{style:{border:"0px transparent"},position:"end",children:Q})}})),Object(A.jsx)(X,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.holderName,error:!!(null===(a=ne.holderName)||void 0===a?void 0:a.message),className:Y.inputs,helperText:null===(c=ne.holderName)||void 0===c?void 0:c.message},te("holderName",$("holderName"))),{},{onChange:$("holderName"),type:"text",id:"outlined-error-helper-text",label:"Nome igual ao do cart\xe3o",variant:"outlined"})),Object(A.jsx)(M.a,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.holderDocument,mask:"999.999.999-99",error:!!(null===(o=ne.holderDocument)||void 0===o?void 0:o.message),className:Y.inputs,helperText:null===(s=ne.holderDocument)||void 0===s?void 0:s.message},te("holderDocument",$("holderDocument"))),{},{onChange:$("holderDocument"),type:"text",id:"outlined-error-helper-text",label:"Documento(CPF)",variant:"outlined",children:function(e){return Object(A.jsx)(X,Object(j.a)({},e))}})),Object(A.jsxs)(m.a,{display:"flex",children:[Object(A.jsx)(X,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.expMonth,error:!!(null===(d=ne.expMonth)||void 0===d?void 0:d.message),className:Y.inputs,helperText:null===(v=ne.expMonth)||void 0===v?void 0:v.message},te("expMonth",$("expMonth"))),{},{onChange:$("expMonth"),type:"text",id:"outlined-error-helper-text",label:"M\xeas",variant:"outlined",inputProps:{maxLength:2}})),Object(A.jsx)(M.a,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.expYear,mask:"99",error:!!(null===(y=ne.expYear)||void 0===y?void 0:y.message),className:Y.inputs,helperText:null===(w=ne.expYear)||void 0===w?void 0:w.message},te("expYear",$("expYear"))),{},{onChange:$("expYear"),type:"text",id:"outlined-error-helper-text",label:"Ano",variant:"outlined",children:function(e){return Object(A.jsx)(X,Object(j.a)({},e))}})),Object(A.jsx)(X,Object(j.a)(Object(j.a)({value:null===I||void 0===I?void 0:I.cvv,error:!!(null===(S=ne.cvv)||void 0===S?void 0:S.message),className:Y.inputs,helperText:null===(N=ne.cvv)||void 0===N?void 0:N.message},te("cvv",$("cvv"))),{},{onChange:$("cvv"),type:"text",id:"outlined-error-helper-text",label:"CVV",variant:"outlined"}))]}),Object(A.jsx)(K,{title:E?"Ocorreu um erro":"Opera\xe7\xe3o efetuada com sucesso",message:E,open:Z,deny:{action:function(){return U("")},label:"Fechar"},setOpen:function(){return U("")}}),Object(A.jsx)(x.a,{className:Y.button,variant:"outlined",color:"primary",onClick:re(oe),children:"Confirmar"})]})]})}var G=r(380),$=r(381),ee=Object(S.a)((function(){return{title:{color:"#68846D",fontWeight:"bold",fontSize:"1rem",padding:"10px 0px 2px 0px"},subTitle:{color:"grey",fontWeight:"bold",fontSize:"0.8rem",textAlign:"left"}}}));function te(e){var t,r,a,c,o=Object(i.e)().id,s=Object(n.useState)(""),d=Object(u.a)(s,2),p=d[0],j=d[1],h=Object(n.useContext)(F),y=(h.address,h.card,h.user),w=(h.setCard,h.getUser),S=ee(e),k=Object(O.d)({mode:"onBlur",resolver:Object(g.a)(C)}),N=(k.register,k.handleSubmit,k.formState.errors,e.submit,e.existsCard,function(){var e=Object(b.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P({password:p,document:o});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(n.useEffect)((function(){w(o)}),[]),Object(A.jsxs)(m.a,{display:"flex",marginTop:10,flexDirection:"column",children:[Object(A.jsx)(m.a,{display:"flex",alignItems:"flex-start",justifyContent:"center",flexDirection:"row",children:Object(A.jsx)(f.a,{className:S.title,children:" Verifique os dados:"})}),Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",alignItems:"start",children:[Object(A.jsx)(f.a,{className:S.title,children:"Cart\xe3o:"}),Object(A.jsxs)(f.a,{className:S.subTitle,children:[null===y||void 0===y||null===(t=y.cards)||void 0===t?void 0:t.brand," com final ",null===y||void 0===y||null===(r=y.cards)||void 0===r?void 0:r.last_four_digits," "]}),Object(A.jsx)(f.a,{className:S.title,children:"Nome no cart\xe3o:"}),Object(A.jsx)(f.a,{className:S.subTitle,children:null===y||void 0===y||null===(a=y.cards)||void 0===a?void 0:a.holder_name}),Object(A.jsx)(f.a,{className:S.title,children:"CPF do portador do cart\xe3o:"}),Object(A.jsxs)(f.a,{className:S.subTitle,children:[" ",null===y||void 0===y||null===(c=y.cards)||void 0===c?void 0:c.holder_document," "]})]}),Object(A.jsxs)(m.a,{display:"flex",flexDirection:"column",marginTop:5,children:[Object(A.jsx)(f.a,{className:S.subTitle,children:"Para concluir a assinatura, digite sua senha e confirme"}),Object(A.jsx)(v.a,{style:{marginTop:5,marginBottom:10},label:"senha",type:"password",onChange:function(e){j(e.target.value)},variant:"outlined"}),Object(A.jsx)(x.a,{label:"senha",onClick:N,variant:"outlined",children:"Confirmar"})]}),Object(A.jsx)(K,{title:"okok",message:"oko",open:!1})]})}var re=function(e){var t=Object(n.useState)(!1),r=Object(u.a)(t,2),a=r[0],c=r[1],o=Object(n.useContext)(F).getUser,s=k(e),d=Object(i.e)().id,l=Object(n.useState)(0),b=Object(u.a)(l,2),p=b[0],j=b[1],v=function(){p<3&&j(p+1)};return Object(n.useEffect)((function(){c(!0),o(d).then((function(e){return c(!1)}))}),[]),Object(A.jsxs)(G.a,{className:s.root,children:[Object(A.jsx)(m.a,{display:"flex",justifyContent:"space-around"}),Object(A.jsx)(m.a,{children:a?Object(A.jsx)(m.a,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",height:"100vh",children:Object(A.jsx)($.a,{style:{color:"green"}})}):function(){switch(p){case 0:return Object(A.jsx)(Z,{submit:v});case 1:return Object(A.jsx)(te,{})}}()})]})},ne=function(){return Object(i.g)([{path:"/payment/:id",element:Object(A.jsx)(re,{})}])},ae=r(382),ce=r(383);var oe=function(){return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(ae.a,{children:Object(A.jsx)(ce.a,{style:{backgroundColor:"#68846D"},children:Object(A.jsx)("img",{alt:"Logo",src:"/assets/logo.png"})})}),Object(A.jsx)("hr",{}),Object(A.jsx)(ne,{})]})},se=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,397)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))};o.a.render(Object(A.jsx)(s.a,{children:Object(A.jsx)(a.a.StrictMode,{children:Object(A.jsx)(z,{children:Object(A.jsx)(oe,{})})})}),document.getElementById("root")),se()},63:function(e,t,r){"use strict";(function(e){var n=r(90),a=r.n(n),c=new Headers;console.log(c);var o=a.a.create({baseURL:"http://localhost:3000/dev/",headers:{Authorization:"Basic "+e.from("sk_test_Z58AQoXcghQe91kb:").toString("base64"),"Content-Type":"application/json",Accept:"*/*"}});t.a=o}).call(this,r(288).Buffer)}},[[319,1,2]]]);
//# sourceMappingURL=main.3028012f.chunk.js.map